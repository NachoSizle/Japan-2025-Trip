---
import { getCollection } from 'astro:content';

// Leer frases destacadas desde la colecciÃ³n 'itinerario'
const itinerarioCollection = await getCollection('itinerario');
// Suponemos que solo hay un archivo global, si hay varios, puedes ajustar el filtro
const frasesUtiles = itinerarioCollection[0]?.data.frases_utiles || [];
// Selecciona las 6 primeras como "destacadas"
const frasesDestacadas = frasesUtiles.slice(0, 6);
---

<section id="frases-preview" class="py-12 phrases-preview-section">
  <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 m-0">
    <!-- Header -->
    <div class="text-center mb-12 sm:mb-16">
      <h2 class="text-3xl sm:text-4xl lg:text-5xl font-bold m-0 mb-4 phrases-preview-title">
        ğŸ—£ï¸ Frases Esenciales
      </h2>
      <p class="text-lg sm:text-xl lg:text-2xl mb-6 phrases-preview-subtitle">
        Aprende las frases mÃ¡s importantes para desenvolverte en JapÃ³n
      </p>
      <div class="flex justify-center">
        <a href={`${import.meta.env.BASE_URL}frases`} class="phrases-preview-cta group">
          <span class="group-hover:animate-pulse">ğŸ“š Ver Todas las Frases</span>
          <span class="phrases-preview-arrow">â†’</span>
        </a>
      </div>
    </div>

    <!-- Grid de frases destacadas -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12">
      {frasesDestacadas.map((frase, index) => (
        <div class="phrases-preview-card" data-aos="fade-up" data-aos-delay={index * 100}>
          <div class="phrases-preview-category">
            {frase.categoria}
          </div>
          <div class="phrases-preview-japanese">
            {frase.japones}
          </div>
          <div class="phrases-preview-phonetic">
            {frase.romaji}
          </div>
          <div class="phrases-preview-translation">
            {frase.espaÃ±ol}
          </div>
        </div>
      ))}
    </div>

    <!-- Stats rÃ¡pidas -->
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 max-w-4xl mx-auto">
      <div class="phrases-preview-stat">
        <div class="phrases-preview-stat-number">{frasesUtiles.length}</div>
        <div class="phrases-preview-stat-label">Frases Ãºtiles</div>
      </div>
      <div class="phrases-preview-stat">
        <div class="phrases-preview-stat-number">{[...new Set(frasesUtiles.map(f => f.categoria))].length}</div>
        <div class="phrases-preview-stat-label">CategorÃ­as</div>
      </div>
      <div class="phrases-preview-stat">
        <div class="phrases-preview-stat-number">100%</div>
        <div class="phrases-preview-stat-label">Con fonÃ©tica</div>
      </div>
      <div class="phrases-preview-stat">
        <div class="phrases-preview-stat-number">ğŸ“±</div>
        <div class="phrases-preview-stat-label">FÃ¡cil acceso</div>
      </div>
    </div>

    <!-- InformaciÃ³n adicional -->
    <div class="mt-12 text-center">
      <div class="phrases-preview-info">
        <h3 class="phrases-preview-info-title">
          Â¿Por quÃ© son importantes estas frases?
        </h3>
        <p class="phrases-preview-info-text">
          JapÃ³n es un paÃ­s increÃ­blemente acogedor, pero el idioma puede ser una barrera. 
          Con estas frases bÃ¡sicas podrÃ¡s comunicarte para situaciones esenciales como pedir direcciones, 
          ordenar comida, hacer compras y manejar emergencias. Â¡La mayorÃ­a de japoneses apreciarÃ¡n enormemente tu esfuerzo!
        </p>
      </div>
    </div>
  </div>
</section>

<style>
  /* ... Copia aquÃ­ los estilos del componente original ... */
</style>
