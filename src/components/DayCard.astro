---
export interface Props {
  day: number;
  fecha: string;
  titulo: string;
  ciudad: string;
  actividades: Array<{
    hora: string;
    actividad: string;
    ubicacion: string;
    tipo: string;
    gluten_free?: boolean;
    destacado?: boolean;
    alternativa_gf?: string;
    notas?: string;
  }>;
}

const { day, fecha, titulo, ciudad, actividades } = Astro.props as Props;

// Funci√≥n para obtener el icono seg√∫n el tipo de actividad
function getActivityIcon(tipo: string) {
  const icons: Record<string, string> = {
    'transporte': '‚úàÔ∏è',
    'alojamiento': 'üè®',
    'comida': 'üçΩÔ∏è',
    'turismo': 'üóº',
    'cultura': 'üèØ',
    'naturaleza': 'üå∏'
  };
  return icons[tipo] || 'üìç';
}

// Funci√≥n para obtener color seg√∫n el tipo
function getActivityColor(tipo: string) {
  const colors: Record<string, string> = {
    'transporte': 'daycard-activity-transport',
    'alojamiento': 'daycard-activity-hotel',
    'comida': 'daycard-activity-food',
    'turismo': 'daycard-activity-tourism',
    'cultura': 'daycard-activity-culture',
    'naturaleza': 'daycard-activity-nature'
  };
  return colors[tipo] || 'daycard-activity-default';
}
---

<div class="daycard-container backdrop-blur-sm rounded-xl p-4 sm:p-6 transition-all duration-300 group">
  <!-- Header del d√≠a -->
  <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 sm:mb-6">
    <div class="flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4">
      <span class="daycard-day-number text-lg sm:text-xl font-bold">D√≠a {day}</span>
      <span class="daycard-date text-sm sm:text-base font-mono">{fecha}</span>
      <span class="daycard-city text-sm sm:text-base font-semibold">{ciudad}</span>
    </div>
  </div>

  <div class="mb-4">
    <h3 class="daycard-title text-xl sm:text-2xl font-bold mb-2">{titulo}</h3>
  </div>

  <!-- Lista de actividades optimizada para m√≥vil -->
  <div class="space-y-3 sm:space-y-4">
    {actividades.map((act) => (
      <div class={`flex items-start gap-3 sm:gap-4 p-3 sm:p-4 rounded-lg border-l-4 ${getActivityColor(act.tipo)} daycard-activity shadow-md`}>
        <div class="text-xl sm:text-2xl flex-shrink-0 mt-1">{getActivityIcon(act.tipo)}</div>
        <div class="flex-1 min-w-0">
          <div class="flex flex-col sm:flex-row sm:items-center gap-1 sm:gap-2 mb-2">
            <span class="daycard-activity-name font-bold text-base sm:text-lg break-words">{act.actividad}</span>
            <div class="flex items-center gap-2 flex-wrap">
              {act.gluten_free && <span class="daycard-badge-gf px-2 py-1 rounded font-semibold text-xs whitespace-nowrap">üåæüö´ GF</span>}
              {act.destacado && <span class="daycard-badge-featured px-2 py-1 rounded font-semibold text-xs whitespace-nowrap">‚≠ê</span>}
            </div>
          </div>
          <div class="daycard-activity-details text-xs sm:text-sm font-mono break-words">{act.hora} ‚Ä¢ {act.ubicacion}</div>
          {act.alternativa_gf && <div class="daycard-gf-alternative text-xs mt-1 break-words">Alternativa GF: {act.alternativa_gf}</div>}
          {act.notas && <div class="daycard-notes text-xs mt-1 italic break-words">{act.notas}</div>}
        </div>
      </div>
    ))}
  </div>
</div>

<style>
  /* DayCard Container */
  .daycard-container {
    background: rgba(255, 20, 147, 0.08);
    border: 1px solid rgba(255, 20, 147, 0.3);
    backdrop-filter: blur(10px);
  }
  
  .daycard-container:hover {
    border-color: rgba(255, 20, 147, 0.5);
    box-shadow: 0 8px 32px rgba(255, 20, 147, 0.2);
  }
  
  [data-theme="light"] .daycard-container {
    background: rgba(255, 20, 147, 0.05);
    border: 1px solid rgba(255, 20, 147, 0.2);
  }
  
  [data-theme="light"] .daycard-container:hover {
    background: rgba(255, 20, 147, 0.1);
    border-color: rgba(255, 20, 147, 0.4);
  }

  /* Day Number */
  .daycard-day-number {
    color: #FF1493;
    text-shadow: 0 0 10px rgba(255, 20, 147, 0.5);
  }

  /* Date */
  .daycard-date {
    color: rgba(255, 255, 255, 0.7);
  }
  
  [data-theme="light"] .daycard-date {
    color: rgba(80, 50, 80, 0.8);
  }

  /* City */
  .daycard-city {
    color: #FF6B6B;
    text-shadow: 0 0 8px rgba(255, 107, 107, 0.4);
  }

  /* Title */
  .daycard-title {
    background: linear-gradient(135deg, #FF1493, #FF6B6B);
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  /* Activity Container */
  .daycard-activity {
    background: rgba(0, 0, 0, 0.3);
  }
  
  [data-theme="light"] .daycard-activity {
    background: rgba(255, 255, 255, 0.5);
  }

  /* Activity Types */
  .daycard-activity-transport {
    border-left-color: #FF6B6B !important;
  }

  .daycard-activity-hotel {
    border-left-color: #FF8A80 !important;
  }

  .daycard-activity-food {
    border-left-color: #FF0040 !important;
  }

  .daycard-activity-tourism {
    border-left-color: #FF1493 !important;
  }

  .daycard-activity-culture {
    border-left-color: #FF8A80 !important;
  }

  .daycard-activity-nature {
    border-left-color: #FFB3BA !important;
  }

  .daycard-activity-default {
    border-left-color: #FF6B6B !important;
  }

  /* Activity Name */
  .daycard-activity-name {
    color: white;
  }
  
  [data-theme="light"] .daycard-activity-name {
    color: #333;
  }

  /* Activity Details */
  .daycard-activity-details {
    color: rgba(255, 255, 255, 0.7);
  }
  
  [data-theme="light"] .daycard-activity-details {
    color: rgba(80, 50, 80, 0.8);
  }

  /* Badges */
  .daycard-badge-gf {
    background: #FF8A80;
    color: white;
    box-shadow: 0 2px 8px rgba(255, 138, 128, 0.4);
  }

  .daycard-badge-featured {
    background: #FF1493;
    color: white;
    box-shadow: 0 2px 8px rgba(255, 20, 147, 0.4);
  }

  /* GF Alternative */
  .daycard-gf-alternative {
    color: #FF8A80;
  }

  /* Notes */
  .daycard-notes {
    color: rgba(255, 255, 255, 0.6);
  }
  
  [data-theme="light"] .daycard-notes {
    color: rgba(80, 50, 80, 0.7);
  }
</style>
